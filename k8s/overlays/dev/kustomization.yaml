namePrefix: dev-
commonLabels:
  variant: dev
commonAnnotations:
  note: This is dev!
resources:
- ../../base
patchesStrategicMerge:
- map.yaml

configMapGenerator:
- name: stockprice-configmap
  behavior: merge
  literals:
  - ENV=dev
  - MYSQLDUMP_TO_GOOGLEDRIVE=on
  - DUMP_EXECUTE_DAYS=Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday # 毎日
  - DRIVE_FOLDER_NAME=gke-stockprice-dump-test
  - DRIVE_FILE_MIMETYPE=text/plain
  - DRIVE_NEED_TO_BACKUP=1
  - DB_HOST=127.0.0.1
  - DB_PORT=3306
  - DB_NAME=stockprice_dev
  - DUMP_TARGET_TABLES=daily,movingavg
  files:
  - GROWTHTREND_TARGETDATE=growthtrend_targetdate.txt # integration_test内で動的に生成される
  - DAILY_PRICE_URL=daily_price_url.txt # integration_test内で動的に生成される

- name: sql-proxy-config
  behavior: create
  files:
  - db_connection_name=db_connection_name.txt # integration_test内で動的に生成される

secretGenerator:
- name: stockprice-secret
  behavior: merge
  files:
  - HOLIDAY_SHEETID=dev_sheetid.txt # integration_test前に配置しておく
  - COMPANYCODE_SHEETID=dev_sheetid.txt # integration_test前に配置しておく
  - TREND_SHEETID=dev_sheetid.txt # integration_test前に配置しておく
  - STATUS_SHEETID=dev_sheetid.txt # integration_test前に配置しておく
  - DRIVE_PERMISSION_GMAIL=gmail.txt
